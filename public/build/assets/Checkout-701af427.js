import{r as u,W as j,j as e,a as S,y as k}from"./app-bfca789f.js";import{U as W}from"./UserLayout-3e3302f7.js";import{C as D}from"./CartItemCard-2e7e15d4.js";import{N as I}from"./NumberWithComma-33cbe42f.js";import{N as T}from"./NewAddressForm-94507c93.js";import{B as o}from"./Box-6d5617a7.js";import{T as i}from"./Typography-167ed09c.js";import{B as l}from"./Button-cc2979e5.js";import{T as B}from"./TextField-470e9fa2.js";import"./AppBar-864d2102.js";import"./FlashMessage-5076cc4d.js";import"./clsx-2dc4ea28.js";import"./Modal-412f03d8.js";import"./styled-1a14c428.js";import"./TransitionGroupContext-9a834f65.js";import"./List-0d824f1b.js";import"./ButtonBase-1745f224.js";import"./index-3460d290.js";import"./Select-7f8e6ae7.js";import"./DeleteRounded-8794f0a1.js";import"./Add-230d54a8.js";import"./Grid-a507ed58.js";import"./extendSxProp-7334409b.js";import"./Chip-018ff428.js";function ie(m){const n=m.carts,a=m.totalAmount,t=m.address,[c,d]=u.useState(!1),{data:r,setData:f,post:g,processing:y,errors:E,reset:O}=j({items:n,address:t==null?void 0:t.address,city:t==null?void 0:t.city,phone:t==null?void 0:t.phone,totalAmount:a,customer_name:""}),{data:h,setData:C,post:v,errors:b}=j({address:"",city:"",phone:""});u.useEffect(()=>{f({items:n,address:t==null?void 0:t.address,city:t==null?void 0:t.city,phone:t==null?void 0:t.phone,totalAmount:a})},[n,t,a]);const A=s=>{const{name:p,value:x}=s.target;C({...h,[p]:x})},w=s=>{const{name:p,value:x}=s.target;f({...r,[p]:x})},z=s=>{s.preventDefault(),v(route("storeAddress"),{onSuccess:()=>{d(!1)},newAddress:h})},N=s=>{s.preventDefault(),t?g(route("placeOrder"),r):alert("Please enter address to deliver")};return console.log(r),e.jsxs(W,{children:[e.jsx(S,{title:"Checkout"}),n.length==0?e.jsxs(o,{sx:{width:"100%",height:"70vh",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[e.jsx(i,{variant:"h6",fontWeight:600,mb:3,children:"You haven't any item."}),e.jsx(l,{variant:"contained",size:"small",onClick:()=>k.visit(route("home")),children:"Go to shopping"})]}):e.jsxs(o,{children:[e.jsx(i,{fontSize:20,fontWeight:600,my:2,children:"Checkout"}),e.jsx(o,{sx:{mb:2},children:e.jsx(B,{label:"Customer name",size:"small",name:"customer_name",value:r.customer_name,onChange:w})}),e.jsxs(o,{sx:{p:2,border:"2px dashed #ba7636"},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{fontSize:18,fontWeight:600,mb:1,children:"Deliver to:"}),t&&e.jsx(l,{size:"small",onClick:()=>d(!c),children:"Change address"})]}),t?e.jsxs(i,{align:"center",fontSize:15,children:[r.address,", ",r.city,", ",r.phone]}):e.jsx(o,{px:7,children:e.jsx(l,{variant:"contained",fullWidth:!0,onClick:()=>d(!c),size:"small",children:"Add New Address"})})]}),c&&e.jsx(T,{data:h,handleChange:A,handleSubmit:z,errors:b}),n.map(s=>e.jsx(D,{cart:s},s.id)),e.jsx(o,{sx:{position:"fixed",bottom:0,left:0,bgcolor:"#ffffff",opacity:"90%",width:"100%"},children:e.jsxs(o,{sx:{p:1,display:"flex",justifyContent:"center",alignItems:"center",gap:3},children:[e.jsxs(i,{sx:{fontWeight:900,fontSize:{xs:14,sm:16,md:16}},children:["Total Amount:"," ",e.jsx(I,{value:a})," Ks"]}),e.jsx(l,{variant:"contained",onClick:N,disabled:y,children:"Place Order"})]})})]})]})}export{ie as default};
