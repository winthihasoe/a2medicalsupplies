import{W as R,r as A,j as e,a as B,y as T}from"./app-bfca789f.js";import{A as W}from"./AdminLayout-5f79c8c8.js";import{P as N}from"./ProductDescriptionEditor-53f9be7b.js";import{d as y}from"./DeleteRounded-8794f0a1.js";import{B as r}from"./Box-6d5617a7.js";import{T as n}from"./Typography-167ed09c.js";import{T as m}from"./TextField-470e9fa2.js";import{C as E}from"./Chip-018ff428.js";import{G as p}from"./Grid-a507ed58.js";import{B as l}from"./Button-cc2979e5.js";import{M as H,B as F,F as L}from"./Modal-412f03d8.js";import"./FlashMessage-5076cc4d.js";import"./clsx-2dc4ea28.js";import"./styled-1a14c428.js";import"./List-0d824f1b.js";import"./TransitionGroupContext-9a834f65.js";import"./ButtonBase-1745f224.js";import"./BackButton-3d0bdef6.js";import"./index-28551cb9.js";import"./extendSxProp-7334409b.js";import"./Select-7f8e6ae7.js";function de(h){const c=h.product,b=h.categories,{data:i,setData:a,post:C,errors:O,progress:U,processing:u,delete:x}=R({...c,new_images:[]}),v=t=>{const s=i.new_images,o=Array.from(t.target.files);a({...i,new_images:[...s,...o]})},k=t=>{const s=[...i.images],o=s.splice(t,1)[0];a({...i,images:s}),x(route("removeProductImage",o),i)},w=t=>{const s=[...i.new_images];s.splice(t,1),a({...i,new_images:s})},d=t=>{const{name:s,value:o}=t.target;a({...i,[s]:o})},z=t=>{a({...i,description:t})},P=t=>{t.preventDefault(),C(route("updateProduct",c.id),i)},S=t=>{t.preventDefault(),T.get(route("adminProducts"))},_=t=>{t.preventDefault(),x(route("deleteProduct",i.id))},[g,j]=A.useState(!1),I=()=>j(!0),f=()=>j(!1),D={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:300,bgcolor:"background.paper",borderRadius:3,boxShadow:24,p:3,textAlign:"center"};return e.jsxs(W,{heading:"Single Product",children:[e.jsx(B,{title:c.product_name}),e.jsx(r,{sx:{m:2,height:200,backgroundColor:"#e3e3e3",borderRadius:5},children:e.jsx(r,{children:e.jsxs("div",{style:{overflowX:"auto",whiteSpace:"nowrap",maxHeight:"200px",borderRadius:20},children:[i.images.length>0&&i.images.map((t,s)=>e.jsxs("div",{style:{display:"inline-block",marginRight:"10px"},children:[e.jsx("img",{src:`/storage/images/products/${t}`,alt:`Image ${s}`,style:{maxHeight:"160px"}}),e.jsx("span",{style:{display:"block",textAlign:"center",cursor:"pointer",marginTop:"5px"},onClick:()=>k(s),children:e.jsx(y,{fontSize:"sm"})})]},s)),i.new_images.map((t,s)=>e.jsxs("div",{style:{display:"inline-block",marginRight:"10px"},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`Image ${s}`,style:{maxHeight:"160px"}}),e.jsx("span",{style:{display:"block",textAlign:"center",cursor:"pointer",marginTop:"5px"},onClick:()=>w(s),children:e.jsx(y,{fontSize:"sm"})})]},s))]})})}),e.jsxs("label",{variant:"outlined",className:"change-photo",children:["Add Photo",e.jsx("input",{className:"add-photo-input",type:"file",name:"new_images",accept:"image/png, image/jpeg, image/webp, image/HEIC",multiple:!0,onChange:v,style:{display:"none"}})]}),e.jsx("form",{children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:2,my:5},children:[e.jsxs(r,{children:[e.jsx(n,{fontSize:12,children:"Product Name:"}),e.jsx(m,{size:"small",fullWidth:!0,value:i.product_name,onChange:d,name:"product_name"})]}),e.jsxs(r,{children:[e.jsx(n,{fontSize:12,children:"Price:"}),e.jsx(m,{size:"small",fullWidth:!0,type:"number",value:i.price,onChange:d,name:"price"})]}),e.jsxs(r,{children:[e.jsx(n,{fontSize:12,children:"Stock:"}),e.jsx(m,{size:"small",fullWidth:!0,type:"number",value:i.stock,onChange:d,name:"stock"})]}),e.jsx(r,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:b.map(t=>e.jsx(E,{color:i.category==t.category_name?"primary":"secondary",size:"small",label:t.category_name,onClick:()=>a({...i,category:t.category_name})},t.id))}),e.jsxs(r,{children:[e.jsx(n,{fontSize:12,children:"Description:"}),e.jsx(N,{handleChangeDescription:z,initialValue:i.description})]}),e.jsxs(p,{container:!0,children:[e.jsx(p,{item:!0,xs:6,px:3,children:e.jsx(l,{variant:"contained",size:"small",fullWidth:!0,onClick:P,disabled:u,children:"Update"})}),e.jsx(p,{item:!0,xs:6,px:3,children:e.jsx(l,{variant:"contained",color:"secondary",size:"small",fullWidth:!0,onClick:S,children:"Cancel"})})]})]})}),e.jsx(r,{px:6,mb:5,children:e.jsx(l,{variant:"outlined",fullWidth:!0,onClick:I,children:"Delete Product"})}),e.jsx(H,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:g,onClose:f,closeAfterTransition:!0,BackdropComponent:F,BackdropProps:{timeout:500},children:e.jsx(L,{in:g,children:e.jsxs(r,{sx:D,children:[e.jsx(n,{id:"transition-modal-title",variant:"h6",component:"h2",gutterBottom:!0,children:"Delete this product?"}),e.jsx(n,{fontSize:13,align:"center",children:"This process is irreversiable!"}),e.jsxs(r,{sx:{display:"flex",gap:2,justifyContent:"center",my:2},children:[e.jsx(l,{variant:"contained",color:"error",onClick:_,disabled:u,size:"small",children:"Yes"}),e.jsx(l,{variant:"contained",color:"secondary",onClick:f,size:"small",children:"No"})]})]})})})]})}export{de as default};
