import{r as u,W as j,j as e,a as S,y as k}from"./app-7c82a233.js";import{U as W}from"./UserLayout-1286e4a7.js";import{C as D}from"./CartItemCard-99347421.js";import{N as I}from"./NumberWithComma-5ee55115.js";import{N as T}from"./NewAddressForm-56a56b15.js";import{B as o}from"./Box-e662a6c7.js";import{T as i}from"./Typography-04bc32d1.js";import{B as l}from"./Button-5217d8cf.js";import{T as B}from"./TextField-0a59e70b.js";import"./AppBar-2f0f9ce6.js";import"./FlashMessage-ea0101f6.js";import"./clsx-2c1ea34b.js";import"./Modal-27333143.js";import"./styled-11de468a.js";import"./TransitionGroupContext-e300b184.js";import"./List-378c3b0b.js";import"./ButtonBase-16841190.js";import"./index-8878221d.js";import"./Select-ccd6731e.js";import"./DeleteRounded-890ce0f4.js";import"./Add-d8a16f44.js";import"./Grid-018b7f1a.js";import"./extendSxProp-98e1c0d9.js";import"./Chip-8f7d58d3.js";function ie(m){const n=m.carts,a=m.totalAmount,t=m.address,[c,d]=u.useState(!1),{data:r,setData:f,post:g,processing:y,errors:E,reset:O}=j({items:n,address:t==null?void 0:t.address,city:t==null?void 0:t.city,phone:t==null?void 0:t.phone,totalAmount:a,customer_name:""}),{data:h,setData:C,post:v,errors:b}=j({address:"",city:"",phone:""});u.useEffect(()=>{f({items:n,address:t==null?void 0:t.address,city:t==null?void 0:t.city,phone:t==null?void 0:t.phone,totalAmount:a})},[n,t,a]);const A=s=>{const{name:p,value:x}=s.target;C({...h,[p]:x})},w=s=>{const{name:p,value:x}=s.target;f({...r,[p]:x})},z=s=>{s.preventDefault(),v(route("storeAddress"),{onSuccess:()=>{d(!1)},newAddress:h})},N=s=>{s.preventDefault(),t?g(route("placeOrder"),r):alert("Please enter address to deliver")};return console.log(r),e.jsxs(W,{children:[e.jsx(S,{title:"Checkout"}),n.length==0?e.jsxs(o,{sx:{width:"100%",height:"70vh",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[e.jsx(i,{variant:"h6",fontWeight:600,mb:3,children:"You haven't any item."}),e.jsx(l,{variant:"contained",size:"small",onClick:()=>k.visit(route("home")),children:"Go to shopping"})]}):e.jsxs(o,{children:[e.jsx(i,{fontSize:20,fontWeight:600,my:2,children:"Checkout"}),e.jsx(o,{sx:{mb:2},children:e.jsx(B,{label:"Customer name",size:"small",name:"customer_name",value:r.customer_name,onChange:w})}),e.jsxs(o,{sx:{p:2,border:"2px dashed #ba7636"},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{fontSize:18,fontWeight:600,mb:1,children:"Deliver to:"}),t&&e.jsx(l,{size:"small",onClick:()=>d(!c),children:"Change address"})]}),t?e.jsxs(i,{align:"center",fontSize:15,children:[r.address,", ",r.city,", ",r.phone]}):e.jsx(o,{px:7,children:e.jsx(l,{variant:"contained",fullWidth:!0,onClick:()=>d(!c),size:"small",children:"Add New Address"})})]}),c&&e.jsx(T,{data:h,handleChange:A,handleSubmit:z,errors:b}),n.map(s=>e.jsx(D,{cart:s},s.id)),e.jsx(o,{sx:{position:"fixed",bottom:0,left:0,bgcolor:"#ffffff",opacity:"90%",width:"100%"},children:e.jsxs(o,{sx:{p:1,display:"flex",justifyContent:"center",alignItems:"center",gap:3},children:[e.jsxs(i,{sx:{fontWeight:900,fontSize:{xs:14,sm:16,md:16}},children:["Total Amount:"," ",e.jsx(I,{value:a})," Ks"]}),e.jsx(l,{variant:"contained",onClick:N,disabled:y,children:"Place Order"})]})})]})]})}export{ie as default};
