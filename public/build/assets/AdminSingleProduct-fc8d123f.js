import{W as R,r as A,j as e,a as B,y as T}from"./app-eb81fd5d.js";import{A as W}from"./AdminLayout-f57f180f.js";import{P as N}from"./ProductDescriptionEditor-56625162.js";import{d as y}from"./DeleteRounded-c82ac5d8.js";import{B as r}from"./Box-7ada19ab.js";import{T as n}from"./Typography-0828ed07.js";import{T as m}from"./TextField-de708461.js";import{C as E}from"./Chip-a8149923.js";import{G as p}from"./Grid-e1512d28.js";import{B as l}from"./Button-f2c31d43.js";import{M as H,B as F,F as L}from"./Modal-f9284921.js";import"./FlashMessage-afa137b7.js";import"./clsx-4935e7ba.js";import"./List-98eed82e.js";import"./BackButton-f8179b1a.js";import"./index-0afe3130.js";import"./Select-6fc0466f.js";function ne(h){const c=h.product,b=h.categories,{data:s,setData:a,post:C,errors:O,progress:U,processing:u,delete:x}=R({...c,new_images:[]}),v=t=>{const i=s.new_images,o=Array.from(t.target.files);a({...s,new_images:[...i,...o]})},k=t=>{const i=[...s.images],o=i.splice(t,1)[0];a({...s,images:i}),x(route("removeProductImage",o),s)},w=t=>{const i=[...s.new_images];i.splice(t,1),a({...s,new_images:i})},d=t=>{const{name:i,value:o}=t.target;a({...s,[i]:o})},z=t=>{a({...s,description:t})},P=t=>{t.preventDefault(),C(route("updateProduct",c.id),s)},S=t=>{t.preventDefault(),T.get(route("adminProducts"))},_=t=>{t.preventDefault(),x(route("deleteProduct",s.id))},[g,j]=A.useState(!1),I=()=>j(!0),f=()=>j(!1),D={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:300,bgcolor:"background.paper",borderRadius:3,boxShadow:24,p:3,textAlign:"center"};return e.jsxs(W,{heading:"Single Product",children:[e.jsx(B,{title:c.product_name}),e.jsx(r,{sx:{m:2,height:200,backgroundColor:"#e3e3e3",borderRadius:5},children:e.jsx(r,{children:e.jsxs("div",{style:{overflowX:"auto",whiteSpace:"nowrap",maxHeight:"200px",borderRadius:20},children:[s.images.length>0&&s.images.map((t,i)=>e.jsxs("div",{style:{display:"inline-block",marginRight:"10px"},children:[e.jsx("img",{src:`/storage/images/products/${t}`,alt:`Image ${i}`,style:{maxHeight:"160px"}}),e.jsx("span",{style:{display:"block",textAlign:"center",cursor:"pointer",marginTop:"5px"},onClick:()=>k(i),children:e.jsx(y,{fontSize:"sm"})})]},i)),s.new_images.map((t,i)=>e.jsxs("div",{style:{display:"inline-block",marginRight:"10px"},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`Image ${i}`,style:{maxHeight:"160px"}}),e.jsx("span",{style:{display:"block",textAlign:"center",cursor:"pointer",marginTop:"5px"},onClick:()=>w(i),children:e.jsx(y,{fontSize:"sm"})})]},i))]})})}),e.jsxs("label",{variant:"outlined",className:"change-photo",children:["Add Photo",e.jsx("input",{className:"add-photo-input",type:"file",name:"new_images",accept:"image/png, image/jpeg, image/webp, image/HEIC",multiple:!0,onChange:v,style:{display:"none"}})]}),e.jsx("form",{children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:2,my:5},children:[e.jsxs(r,{children:[e.jsx(n,{fontSize:12,children:"Product Name:"}),e.jsx(m,{size:"small",fullWidth:!0,value:s.product_name,onChange:d,name:"product_name"})]}),e.jsxs(r,{children:[e.jsx(n,{fontSize:12,children:"Price:"}),e.jsx(m,{size:"small",fullWidth:!0,type:"number",value:s.price,onChange:d,name:"price"})]}),e.jsxs(r,{children:[e.jsx(n,{fontSize:12,children:"Stock:"}),e.jsx(m,{size:"small",fullWidth:!0,type:"number",value:s.stock,onChange:d,name:"stock"})]}),e.jsx(r,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:b.map(t=>e.jsx(E,{color:s.category==t.category_name?"primary":"secondary",size:"small",label:t.category_name,onClick:()=>a({...s,category:t.category_name})},t.id))}),e.jsxs(r,{children:[e.jsx(n,{fontSize:12,children:"Description:"}),e.jsx(N,{handleChangeDescription:z,initialValue:s.description})]}),e.jsxs(p,{container:!0,children:[e.jsx(p,{item:!0,xs:6,px:3,children:e.jsx(l,{variant:"contained",size:"small",fullWidth:!0,onClick:P,disabled:u,children:"Update"})}),e.jsx(p,{item:!0,xs:6,px:3,children:e.jsx(l,{variant:"contained",color:"secondary",size:"small",fullWidth:!0,onClick:S,children:"Cancel"})})]})]})}),e.jsx(r,{px:6,mb:5,children:e.jsx(l,{variant:"outlined",fullWidth:!0,onClick:I,children:"Delete Product"})}),e.jsx(H,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:g,onClose:f,closeAfterTransition:!0,BackdropComponent:F,BackdropProps:{timeout:500},children:e.jsx(L,{in:g,children:e.jsxs(r,{sx:D,children:[e.jsx(n,{id:"transition-modal-title",variant:"h6",component:"h2",gutterBottom:!0,children:"Delete this product?"}),e.jsx(n,{fontSize:13,align:"center",children:"This process is irreversiable!"}),e.jsxs(r,{sx:{display:"flex",gap:2,justifyContent:"center",my:2},children:[e.jsx(l,{variant:"contained",color:"error",onClick:_,disabled:u,size:"small",children:"Yes"}),e.jsx(l,{variant:"contained",color:"secondary",onClick:f,size:"small",children:"No"})]})]})})})]})}export{ne as default};
