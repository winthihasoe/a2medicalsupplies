import{r as u,W as j,j as e,a as S,y as k}from"./app-eb81fd5d.js";import{U as W}from"./UserLayout-7aec7b48.js";import{C as D}from"./CartItemCard-fb2cfb02.js";import{N as I}from"./NumberWithComma-f2b585d0.js";import{N as T}from"./NewAddressForm-6ac26613.js";import{B as o}from"./Box-7ada19ab.js";import{T as i}from"./Typography-0828ed07.js";import{B as l}from"./Button-f2c31d43.js";import{T as B}from"./TextField-de708461.js";import"./AppBar-f1bdfca8.js";import"./FlashMessage-afa137b7.js";import"./clsx-4935e7ba.js";import"./Modal-f9284921.js";import"./List-98eed82e.js";import"./index-6b61c778.js";import"./Select-6fc0466f.js";import"./DeleteRounded-c82ac5d8.js";import"./Add-3e77e730.js";import"./Grid-e1512d28.js";import"./Chip-a8149923.js";function se(m){const n=m.carts,a=m.totalAmount,t=m.address,[c,d]=u.useState(!1),{data:r,setData:f,post:g,processing:y,errors:E,reset:O}=j({items:n,address:t==null?void 0:t.address,city:t==null?void 0:t.city,phone:t==null?void 0:t.phone,totalAmount:a,customer_name:""}),{data:h,setData:C,post:v,errors:b}=j({address:"",city:"",phone:""});u.useEffect(()=>{f({items:n,address:t==null?void 0:t.address,city:t==null?void 0:t.city,phone:t==null?void 0:t.phone,totalAmount:a})},[n,t,a]);const A=s=>{const{name:p,value:x}=s.target;C({...h,[p]:x})},w=s=>{const{name:p,value:x}=s.target;f({...r,[p]:x})},z=s=>{s.preventDefault(),v(route("storeAddress"),{onSuccess:()=>{d(!1)},newAddress:h})},N=s=>{s.preventDefault(),t?g(route("placeOrder"),r):alert("Please enter address to deliver")};return e.jsxs(W,{children:[e.jsx(S,{title:"Checkout"}),n.length==0?e.jsxs(o,{sx:{width:"100%",height:"70vh",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[e.jsx(i,{variant:"h6",fontWeight:600,mb:3,children:"You haven't any item."}),e.jsx(l,{variant:"contained",size:"small",onClick:()=>k.visit(route("home")),children:"Go to shopping"})]}):e.jsxs(o,{children:[e.jsx(i,{fontSize:20,fontWeight:600,my:2,children:"Checkout"}),e.jsx(o,{sx:{mb:2},children:e.jsx(B,{label:"Customer name",size:"small",name:"customer_name",value:r.customer_name,onChange:w})}),e.jsxs(o,{sx:{p:2,border:"2px dashed #ba7636"},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{fontSize:18,fontWeight:600,mb:1,children:"Deliver to:"}),t&&e.jsx(l,{size:"small",onClick:()=>d(!c),children:"Change address"})]}),t?e.jsxs(i,{align:"center",fontSize:15,children:[r.address,", ",r.city,", ",r.phone]}):e.jsx(o,{px:7,children:e.jsx(l,{variant:"contained",fullWidth:!0,onClick:()=>d(!c),size:"small",children:"Add New Address"})})]}),c&&e.jsx(T,{data:h,handleChange:A,handleSubmit:z,errors:b}),n.map(s=>e.jsx(D,{cart:s},s.id)),e.jsx(o,{sx:{position:"fixed",bottom:0,left:0,bgcolor:"#ffffff",opacity:"90%",width:"100%"},children:e.jsxs(o,{sx:{p:1,display:"flex",justifyContent:"center",alignItems:"center",gap:3},children:[e.jsxs(i,{sx:{fontWeight:900,fontSize:{xs:14,sm:16,md:16}},children:["Total Amount:"," ",e.jsx(I,{value:a})," Ks"]}),e.jsx(l,{variant:"contained",onClick:N,disabled:y,children:"Place Order"})]})})]})]})}export{se as default};
